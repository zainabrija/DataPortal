{% extends "base.html" %} {% block title %}Feedback & Suggestions - PBS Data
Portal{% endblock %} {% block content %}
<div class="container py-5">
  <h1 class="mb-4 fw-bold text-primary">Feedback & Suggestions</h1>
  <p class="text-muted mb-4">
    We value your feedback! Help us improve our data portal by sharing your
    thoughts and suggestions.
  </p>

  <form method="POST" class="form-container">
    <!-- Personal Information Section -->
    <div class="section-header mb-3">Personal Information</div>

    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="name" class="form-label">Name *</label>
          <input
            type="text"
            class="form-control"
            id="name"
            name="name"
            value="{{ current_user.name if current_user.is_authenticated else '' }}"
            required
          />
        </div>
      </div>
      <div class="col-md-6">
        <div class="mb-3">
          <label for="email" class="form-label">Email Address *</label>
          <input
            type="email"
            class="form-control"
            id="email"
            name="email"
            value="{{ current_user.email if current_user.is_authenticated else '' }}"
            required
          />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="organization" class="form-label"
            >Organization/Institution</label
          >
          <input
            type="text"
            class="form-control"
            id="organization"
            name="organization"
            value="{{ current_user.department if current_user.is_authenticated else '' }}"
          />
        </div>
      </div>
      <div class="col-md-6">
        <div class="mb-3">
          <label for="user_type" class="form-label">User Type *</label>
          <select class="form-select" id="user_type" name="user_type" required>
            <option value="">Select User Type</option>
            <option value="Researcher">Researcher</option>
            <option value="Academic">Academic</option>
            <option value="Government Official">Government Official</option>
            <option value="Business Professional">Business Professional</option>
            <option value="Student">Student</option>
            <option value="Journalist">Journalist</option>
            <option value="General Public">General Public</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Feedback Category Section -->
    <div class="section-header mb-3 mt-4">Feedback Category</div>

    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="feedback_type" class="form-label"
            >Type of Feedback *</label
          >
          <select
            class="form-select"
            id="feedback_type"
            name="feedback_type"
            required
          >
            <option value="">Select Feedback Type</option>
            <option value="General Feedback">General Feedback</option>
            <option value="Data Request">Data Request</option>
            <option value="Website Usability">Website Usability</option>
            <option value="Data Quality">Data Quality</option>
            <option value="Feature Request">Feature Request</option>
            <option value="Bug Report">Bug Report</option>
            <option value="Data Availability">Data Availability</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </div>
      <div class="col-md-6">
        <div class="mb-3">
          <label for="priority" class="form-label">Priority Level</label>
          <select class="form-select" id="priority" name="priority">
            <option value="">Select Priority</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
            <option value="Critical">Critical</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Rating Section -->
    <div class="section-header mb-3 mt-4">Portal Rating</div>

    <div class="row">
      <div class="col-md-4">
        <div class="mb-3">
          <label for="overall_rating" class="form-label"
            >Overall Experience *</label
          >
          <select
            class="form-select"
            id="overall_rating"
            name="overall_rating"
            required
          >
            <option value="">Select Rating</option>
            <option value="5">Excellent (5)</option>
            <option value="4">Very Good (4)</option>
            <option value="3">Good (3)</option>
            <option value="2">Fair (2)</option>
            <option value="1">Poor (1)</option>
          </select>
        </div>
      </div>
      <div class="col-md-4">
        <div class="mb-3">
          <label for="usability_rating" class="form-label">Ease of Use</label>
          <select
            class="form-select"
            id="usability_rating"
            name="usability_rating"
          >
            <option value="">Select Rating</option>
            <option value="5">Excellent (5)</option>
            <option value="4">Very Good (4)</option>
            <option value="3">Good (3)</option>
            <option value="2">Fair (2)</option>
            <option value="1">Poor (1)</option>
          </select>
        </div>
      </div>
      <div class="col-md-4">
        <div class="mb-3">
          <label for="data_quality_rating" class="form-label"
            >Data Quality</label
          >
          <select
            class="form-select"
            id="data_quality_rating"
            name="data_quality_rating"
          >
            <option value="">Select Rating</option>
            <option value="5">Excellent (5)</option>
            <option value="4">Very Good (4)</option>
            <option value="3">Good (3)</option>
            <option value="2">Fair (2)</option>
            <option value="1">Poor (1)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Feedback Details Section -->
    <div class="section-header mb-3 mt-4">Feedback Details</div>

    <div class="mb-3">
      <label for="subject" class="form-label">Subject/Title *</label>
      <input
        type="text"
        class="form-control"
        id="subject"
        name="subject"
        placeholder="Brief description of your feedback"
        required
      />
    </div>

    <div class="mb-3">
      <label for="feedback_message" class="form-label"
        >Detailed Feedback *</label
      >
      <textarea
        class="form-control"
        id="feedback_message"
        name="feedback_message"
        rows="6"
        placeholder="Please provide detailed feedback, suggestions, or describe any issues you've encountered..."
        required
      ></textarea>
    </div>

    <div class="mb-3">
      <label for="suggestions" class="form-label"
        >Suggestions for Improvement</label
      >
      <textarea
        class="form-control"
        id="suggestions"
        name="suggestions"
        rows="4"
        placeholder="What improvements would you like to see in our data portal?"
      ></textarea>
    </div>

    <!-- Additional Information Section -->
    <div class="section-header mb-3 mt-4">Additional Information</div>

    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="data_sets_used" class="form-label"
            >Data Sets Used (if applicable)</label
          >
          <input
            type="text"
            class="form-control"
            id="data_sets_used"
            name="data_sets_used"
            placeholder="Which data sets have you accessed?"
          />
        </div>
      </div>
      <div class="col-md-6">
        <div class="mb-3">
          <label for="frequency_of_use" class="form-label"
            >How often do you use this portal?</label
          >
          <select
            class="form-select"
            id="frequency_of_use"
            name="frequency_of_use"
          >
            <option value="">Select Frequency</option>
            <option value="Daily">Daily</option>
            <option value="Weekly">Weekly</option>
            <option value="Monthly">Monthly</option>
            <option value="Occasionally">Occasionally</option>
            <option value="First Time">First Time</option>
          </select>
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label for="contact_preference" class="form-label"
        >Would you like us to contact you for follow-up?</label
      >
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          name="contact_preference"
          id="contact_yes"
          value="yes"
        />
        <label class="form-check-label" for="contact_yes">
          Yes, I would like to be contacted for follow-up
        </label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          name="contact_preference"
          id="contact_no"
          value="no"
          checked
        />
        <label class="form-check-label" for="contact_no"> No, thank you </label>
      </div>
    </div>

    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
      <a href="{{ url_for('dashboard') }}" class="btn btn-secondary me-md-2"
        >Cancel</a
      >
      <button type="submit" class="btn btn-primary">Submit Feedback</button>
    </div>
  </form>
</div>

<script>
  // Form validation
  document.querySelector("form").addEventListener("submit", function (e) {
    const requiredFields = document.querySelectorAll("[required]");
    let isValid = true;

    requiredFields.forEach((field) => {
      if (!field.value.trim()) {
        field.classList.add("is-invalid");
        isValid = false;
      } else {
        field.classList.remove("is-invalid");
      }
    });

    if (!isValid) {
      e.preventDefault();
      alert("Please fill in all required fields.");
    }
  });

  // Remove invalid class when user starts typing
  document.querySelectorAll("input, select, textarea").forEach((field) => {
    field.addEventListener("input", function () {
      if (this.value.trim()) {
        this.classList.remove("is-invalid");
      }
    });
  });
</script>
{% endblock %}
